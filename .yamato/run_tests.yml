Windows_Tests:
  name: Windows 2019.3.0f6 Tests
  agent:
    type: Unity::VM
    flavor: b1.large
    image: package-ci/win10:stable
  skip_checkout: true
  commands:
    - curl -s http://bka.bokken.cloud/upload/Set-ScreenResolution.ps1  --output Unity.psm1
    - powershell.exe -command import-module C:\build\output\jasons-unity\com.unity.xrtools.mars-viking\Unity.psm1 -Force -Verbose; Cmd-RunInteractive -Command 'import-module C:\build\output\jasons-unity\com.unity.xrtools.mars-viking\Unity.psm1 -Force; Set-ScreenResolution -Width 1920 -Height 1080' -Admin -PowerShellPrompt
    - powershell.exe -command (Get-WmiObject -Class Win32_VideoController).VideoModeDescription
  artifacts:
    test_results:
      paths:
        - "test_results/*/**"
  triggers:
    pull_requests:
      - targets:
          only:
            - "master"

MacOS_Tests:
  name: MacOS 2019.3.0f6 Tests
  agent:
    type: Unity::VM::osx
    image: package-ci/mac:stable
    flavor: m1.mac
  skip_checkout: true
  commands:
    - /Library/Application\ Support/Veertu/Anka/addons/change_res 1920x1080x72
  artifacts:
    test_results:
      paths:
        - "test_results/*/**"
  triggers:
    pull_requests:
      - targets:
          only:
            - "master"

Test_Trigger:
  name: Tests Trigger
  agent:
    type: Unity::VM
    image: package-ci/win10:stable
    flavor: b1.large
  commands:
    - dir
  triggers:
    branches:
      only:
      - /.*/
  dependencies:
    - .yamato/run_tests.yml#Windows_Tests
    - .yamato/run_tests.yml#MacOS_Tests


